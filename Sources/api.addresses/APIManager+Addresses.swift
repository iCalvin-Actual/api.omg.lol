//
//  File.swift
//  
//
//  Created by Calvin Chestnut on 2/2/23.
//

import api_core
import Combine

extension APIManager {
    func getAddresses() -> APIResultPublisher<AddressCollection> {
        guard let request = requestConstructor.accountAddressesRequest() else {
            return Just(.failure(.unauthenticated))
                .eraseToAnyPublisher()
        }
        return requestPublisher(request)
    }
    
    func getAddressAvailability(_ address: String) -> APIResultPublisher<AccountAddress.Availability> {
        let request = requestConstructor.addressAvailabilityRequest(address)
        return requestPublisher(request)
    }
    
    func getAddressExpiration(_ address: String) -> APIResultPublisher<AccountAddress.Expiration> {
        let request = requestConstructor.addressExpirationRequest(address)
        return requestPublisher(request)
    }
    
    func getAddressInfo(_ address: String) -> APIResultPublisher<AccountAddress.Info> {
        let request = requestConstructor.addressInfoRequest(address)
        return requestPublisher(request)
    }
    
    func getPublicAddressInfo(_ address: String) -> APIResultPublisher<AccountAddress.Info> {
        let request = APIManager().requestConstructor.addressInfoRequest(address)
        return requestPublisher(request)
        
    }
}
